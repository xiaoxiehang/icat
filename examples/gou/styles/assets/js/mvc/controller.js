(function(a){var b=a.Controller.extend({config:{baseBed:".module",scrollBox:"#iScroll",adjustLayout:"header#iHeader.hd + div#iScroll > div.panel"},routes:{home:"homeInit",cod:"codInit"},homeInit:function(){var e=this,d=Gou.view.setting.header.nav;d.forEach(function(c,f){f==0?c.selected=true:delete c.selected;});e.init({view:Gou.view,model:Gou.model,modules:"header, recommend, points, notice, mall, theme, tuan, helper, footer"});},codInit:function(){var f=this,e=Gou.view.setting.header.nav;e.forEach(function(c,g){g==1?c.selected=true:delete c.selected;});f.init({view:Gou.view,model:Gou.model,modules:"header, list"});var d=a.View.extend({config:{tempId:"codDetail",isSave:true,defImage:"img",lazyimgTime:100,events:[{selector:".J_itemWrap figure",type:"singleTap",callback:"tapdetail"},{selector:".J_itemWrap figure",type:"hover",preventDefault:true,callback:function(j,c,i,h,g){this.style.background=g==0?"#f90":"";}}]},tapdetail:function(h,g){var c=$(this),n=$("#iScroll",a.elCurWrap),k=c.attr("data-id"),l=c.next(".J_itemDetail"),j=n.find(".J_itemDetail").not(l);if(l.html()){l.toggleClass("hidden");if(!l.hasClass("hidden")){j.addClass("hidden");n.animate({scrollTop:n.scrollTop()+c.position().top},200);}return;}j.addClass("hidden");l.removeClass("hidden");var i=$(".J_itemWrap figure").index(this);a.util.cookie("itemIndex",i,3600);if(!h.model){h.setModel(a.Model.mainModel);}h.setConfig({wrap:".J_itemDetail:"+i,ajaxUrl:"/api/cod/guide?cid="+k,key:k});if(n.hasClass("not-first")){n.animate({scrollTop:n.scrollTop()+c.position().top},200);}else{n.scrollTop(n.scrollTop()+c.position().top);n.addClass("not-first");}}});f.vmAdd({view:new d("detail")});}});new b("mainPage");})(ICAT);