/*!
 * Copyright 2011~2012, ICAT JavaScript Library v1.1.3
 * https://github.com/valleykid/icat
 *
 * Copyright (c) 2012 valleykid
 * Licensed under the MIT license.
 *
 * @Author valleykiddy@gmail.com
 * @Time 2012-11-29 19:52:00
 */
(function(){var b=this,a={};if(typeof exports!=="undefined"){if(typeof module!=="undefined"&&module.exports){exports=module.exports=a}exports.ICAT=a}else{b.ICAT=a}var g=navigator.userAgent,c=Object.prototype,e=c.toString,d=Array.isArray,f=["namespace"];a.mix=function(m,l,o,k){if(!l||!m){return m}if(!k){k=true}var j,n,h;if(o&&(h=o.length)){for(j=0;j<h;j++){n=o[j];if(n in l){if(k||!(n in m)){m[n]=l[n]}}}}else{for(n in l){if(k||!(n in m)){m[n]=l[n]}}}return m};a.mix(a,{version:"1.1.3",isDebug:/debug/i.test(b.location.href),browser:{safari:/webkit/i.test(g),opera:/opera/i.test(g),msie:/msie/i.test(g)&&!/opera/i.test(g),mozilla:/mozilla/i.test(g)&&!/(compatible|webkit)/i.test(g)},isFunction:function(h){return e.call(h)=="[object Function]"},isString:function(h){return e.call(h)=="[object String]"},isArray:d||function(h){return e.call(h)=="[object Array]"},isObject:function(h){return e.call(h)=="[object Object]"},isNull:function(h){return h===null},foreach:function(p,h,l){var k,m=0,n=p.length,j=n===undefined||a.isString(p);if(l){if(j){for(k in p){if(h.apply(p[k],l)===false){break}}}else{for(;m<n;){if(h.apply(p[m++],l)===false){break}}}}else{if(j){for(k in p){if(h.call(p[k],k,p[k])===false){break}}}else{for(;m<n;){if(h.call(p[m],m,p[m++])===false){break}}}}},Class:function(){var j=arguments,h=j.length;if(h==0){return null}else{if(h==1){var i=j[0];if(!a.isObject(i)){return null}else{function l(){i.Create.apply(this,arguments)}a.foreach(i,function(o,n){if(o!="Create"){l.prototype[o]=n}});return l}}else{if(h>=2){var m=j[0],i=j[1],k=j[2]||b;if(!a.isString(m)||!a.isObject(i)){return null}else{function l(){i.Create.apply(this,arguments)}a.foreach(i,function(o,n){if(o!="Create"){l.prototype[o]=n}});k[m]=l}}}}},widget:function(i,h){this.Class(i,h,a)},namespace:function(){var k=arguments,h=k.length,r=null,n,m,q;for(n=0;n<h;++n){q=(""+k[n]).split(".");r=this;for(m=(b[q[0]]===r)?1:0;m<q.length;++m){r=r[q[m]]=r[q[m]]||{}}}return r},app:function(i,l){var h=this,j=h.isString(i),k=j?b[i]||{}:i;h.mix(k,h,f,true);h.mix(k,h.isFunction(l)?l():l);j&&(b[i]=k);return k},log:function(h){b.console!==undefined&&console.log?console.log(h):alert(h)}})}).call(this);(function(d){var u=document,o=u.head||u.getElementsByTagName("head")[0],r=u.getElementsByName("appRef")[0],k,a,n,e,b,f,s,t,i,m,c,l={},q={};(function(v){k=v[v.length-1];a=k.hasAttribute?k.src:k.getAttribute("src",4);t=k.getAttribute("corelib")||"";i=k.getAttribute("asyn-corelib")||"";m=k.getAttribute("main")||"";c=k.getAttribute("asyn-main")||"";e=/\/sys\//i.test(a);b=/^\.{2}\//.test(m||c);if(/\?[vt]=\d+/.test(a)){n=a.replace(/.*\?/,"?");a=a.replace(/\?.*/,"")}})(u.getElementsByTagName("script"));d.modsConfig={};d.sysRef=e?a.replace(/\/sys\/.*/,"/sys"):a.replace(/\/\w*\.js/,"");d.appRef=r?r.content:d.sysRef;d.libRef=d.sysRef+"/lib";f=e?a.replace(/icat\..*/,"plugin/"):d.sysRef+"plugin/";s=d.appRef+(b?"/assets":"")+"/plugin/";d.config=function(v){d.modsConfig[v.modName]=[];d.foreach(v.paths,function(x,w){d.modsConfig[v.modName].push((v.baseUrl||"")+w)})};var h=function(z){if(!z){return}var x=z.replace(/\s|[\?#].*/g,""),y=x.replace(/.*\./g,""),v=y=="css";if(!x){return}if(d.isDebug){x=/\.source/i.test(x)?x:(v?x.replace(/\.css/g,".source.css"):x.replace(/\.js/g,".source.js"))}if(/^(http|ftp|https):\/\/.*/i.test(x)){return x}else{if(/^\.(\.|~)?\//g.test(x)){if(/^\.\//.test(x)){x=x.replace(/^\./,d.appRef)}if(/^\.{2}\//.test(x)){x=x.replace(/^\.{2}/,d.appRef+(v?"/assets/css":"/assets/js"))}if(/^\.~\//.test(x)){x=x.replace(/^\.~\//,s)}}else{if(/^\/{1,2}/.test(x)){if(/^\/{2}/.test(x)){var w=x.replace(/^\/{2}|.source|.css|.js/ig,"");w=/\d|\./.test(w)?w.replace(/\d(\/)?|\./g,""):w;x=x.replace(/^\//,d.libRef+"/"+w)}else{x=x.replace(/^\//,d.libRef+"/")}}else{if(/^~\//.test(x)){x=x.replace(/^~\//,f)}else{x=d.sysRef+"/"+x}}}}return x+(n||"")},j=function(C){var y=C,z=y.replace(/[\?#].*/,"");if(l[z]){return}var A=z.replace(/.*\./g,""),x=A=="css",w=x?"link":"script",v=x?' type="text/css" rel="stylesheet"':' type="text/javascript"',B=(x?"href":"src")+'="'+y+'"';u.write("<"+w+v+B+(x?"/>":"></"+w+">"));l[z]=true},g=function(y,v,x,w){if(v&&d.isFunction(v)){v(w||d)}if(x){q[x]=true;d.modsConfig[x]=d.modsConfig[x]?d.modsConfig[x]:[];d.modsConfig[x].push(y)}},p=function(z,E,C,x){var v=z,D=k.parentNode||o,A=v.replace(/[\?#].*/,"");if(l[A]){g(z,E,C,x);return}var y,B=A.replace(/.*\./g,"");if(B==="css"){y=u.createElement("link");y.setAttribute("type","text/css");y.setAttribute("rel","stylesheet");y.setAttribute("href",v)}else{if(B==="js"){y=u.createElement("script");y.setAttribute("type","text/javascript");y.setAttribute("src",v);y.setAttribute("async",true)}}if(!y){return}if(d.browser.msie){var w=setInterval(function(){try{document.documentElement.doScroll("left")}catch(F){return}clearInterval(w);if(B==="js"&&y.readyState){y.onreadystatechange=function(){if(y.readyState=="loaded"||y.readyState=="complete"){y.onreadystatechange=null;g(z,E,C,x);l[A]=true}}}D.appendChild(y)},1)}else{if(B==="js"){y.onload=function(){g(z,E,C,x);l[A]=true}}D.appendChild(y)}if(B==="css"){g(z,E,C,x);l[A]=true;D.appendChild(y)}};d.mix(d,{inc:function(v){if(!v){return}v=d.isString(v)?[v]:v;d.foreach(v,function(x,w){if(!w){return}j(h(w))})},incfile:function(C,x,B,A,z){if(!C){return}C=d.isString(C)?[C]:C;var w=C.length-1;if(B){var y=0,v=function(){if(y<w){p(h(C[y]),function(){v()},undefined,z)}else{p(h(C[w]),x,undefined,z)}y++};v()}else{d.foreach(C,function(E,D){E==w?p(h(D),x,undefined,z):p(h(D),undefined,undefined,z)})}},require:function(y,C,x,B,A){if(!C){return}C=d.isString(C)?[C]:C;if(q[y]){if(x){x(A)}}else{var w=C.length-1,z=0,v=function(){if(z<w){p(h(C[z]),function(){v()},y,A)}else{p(h(C[w]),x,y,A)}z++};v()}},use:function(w,v,z,y){var x=0,z=z||500,A;if(q[w]){if(v){v(y)}}else{if(d.modsConfig[w]){A=setInterval(function(){x+=5;if(q[w]){clearInterval(A);if(v){v(y)}}else{if(x>=z){clearInterval(A);d.require(w,d.modsConfig[w],v,y)}}},5)}}}});if(t){t=t.split(",");d.inc(t)}else{if(i){i=i.split(",");d.incfile(i,undefined,true)}}if(m){d.inc(m)}else{if(c){d.incfile(c)}}})(ICAT);
